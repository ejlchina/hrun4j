config:
  name: "获取token信息"
  base_url: "http://127.0.0.1:8000"
teststeps:
  - name: "请求get-token接口获取token信息"
    request:
      url: "/api/get-token"
      method: POST
      headers:
        "device_sn": "10086"
        "os_platform": "Mac OS"
        "app_version": "1.0.0"
      json:
        "sign": "263665175867c416497b99fa461dbe757b2e4d31"
    variables:
      device_sn: "ABC"
      username: "${ENV(USERNAME)}"
      password: "${ENV(PASSWORD)}"
    setup_hooks:
      - "${sleep(2)}"
      - "${hook_print(setup)}"
      - "${modify_request_json($request, android)}"
      - "${alter_response($response)}"
      - total: '${sum_two(1, 5)}'
      - filed_name: get_decoded_response_field($response)
    teardown_hooks:
      "device_sn": "10086"
      "os_platform": "Mac OS"
      "app_version": "1.0.0"
    validate:
      - equalTo: [statusCode, "200"]
      - {"check":"statusCode","comparator":"equalTo","expect":"200"}
      - {"check":"content.code","comparator":"equalTo","expect":"00"}
      - {"check":"content.message","comparator":"equalTo","expect":"ok！"}
